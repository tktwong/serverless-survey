service: datadog-timeboard-example

provider:
  name: aws
  runtime: nodejs8.10
  stage: dev

# you can add CloudFormation resource templates here
resources:
  Resources:
    Timeseries:
      Type: Custom::DatadogTimeboard
      Properties:
        ServiceToken: arn:aws:lambda:us-east-1:632760434310:function:datadog-cfn-custom-resource-dev-timeboard
        Title: TestTimeboard
        Description: generated by CloudFormation custom resource
        LayoutType: ordered
        Widgets:
          - Definition:
              Title: "Availability :: CloudFront (OK requests / all requests)"
              Type: query_value
              Requests:
                - Q: "100-avg:aws.cloudfront.5xx_error_rate{application:content-item,stage:dev}"
                  ConditionalFormats:
                    - Comparator: ">"
                      Value: 99.8
                      Palette: white_on_green
                    - Comparator: ">="
                      Value: 97
                      Palette: white_on_yellow
                    - Comparator: "<"
                      Value: 97
                      Palette: white_on_red
                    